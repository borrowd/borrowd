<!-- Reusable Modal Component
     Parameters:
     - modal_id: Required, unique ID for the modal
     - modal_title: Optional, title text
     - modal_content: Required, HTML content for modal body
     - modal_size: Optional, 'half' or 'full' (default: 'half')
     - button_layout: Optional, 'end' (default), 'between', or 'equal' for button arrangement
     - cancel_button: Optional, text for secondary button (left side)
     - cancel_action: Optional, onclick action for secondary button (if not provided, closes modal)
     - cancel_button_class: Optional, CSS classes for secondary button (default: 'btn btn-ghost font-semibold')
     - confirm_button: Optional, text for primary button (right side)
     - confirm_action: Optional, onclick action for primary button
     - confirm_button_class: Optional, CSS classes for primary button (default: 'btn btn-primary font-semibold')
-->
<dialog id="{{ modal_id }}" class="modal modal-bottom sm:modal-middle">
    <div class="modal-box rounded-t-2xl sm:rounded-2xl p-6 max-w-lg {% if modal_size == 'full' %}max-h-[85vh]{% else %}max-h-[60vh]{% endif %} flex flex-col">
        <!-- Close button -->
        <form method="dialog">
            <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" fill="currentColor" class="w-3 h-3">
                    <path d="M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"/>
                </svg>
            </button>
        </form>

        <!-- Modal Title -->
        {% if modal_title %}
        <h3 class="text-xl font-bold leading-7 p-5 flex-shrink-0">{{ modal_title }}</h3>
        {% endif %}

        <!-- Modal Content (scrollable) -->
        <div class="{% if modal_title %}px-5 py-2{% endif %} leading-7 text-xl overflow-y-auto flex-grow">
            {{ modal_content|safe }}
        </div>

        <!-- Modal actions -->
        {% if cancel_button or confirm_button %}
        <div class="modal-action pt-6 gap-3 flex-shrink-0 {% if button_layout == 'between' %}justify-between{% elif button_layout == 'equal' %}{% else %}justify-end{% endif %}">
            {% if cancel_button %}
                {% if cancel_action %}
                <button type="button" onclick="{{ cancel_action }}" class="{{ cancel_button_class|default:'btn btn-ghost font-semibold' }} {% if button_layout == 'equal' %}flex-1{% endif %}">{{ cancel_button }}</button>
                {% else %}
                <form method="dialog" {% if button_layout == 'equal' %}class="flex-1"{% endif %}>
                    <button class="{{ cancel_button_class|default:'btn btn-ghost font-semibold' }} {% if button_layout == 'equal' %}w-full{% endif %}">{{ cancel_button }}</button>
                </form>
                {% endif %}
            {% endif %}

            {% if confirm_button %}
            <button type="button" onclick="{{ confirm_action }}" class="{{ confirm_button_class|default:'btn btn-primary font-semibold' }} {% if button_layout == 'equal' %}flex-1{% endif %}">{{ confirm_button }}</button>
            {% endif %}
        </div>
        {% endif %}
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>

<script>
function showModal(modalId) {
    document.getElementById(modalId).showModal();
}

function closeModal(modalId) {
    document.getElementById(modalId).close();
}
</script>
