{% load i18n static %}

<c-vars type="text" value="" input_class="" autocomplete="" inputmode="" required="false" help_text="" show_toggle="false" />

<fieldset class="fieldset">
  <legend class="fieldset-legend text-xs font-normal text-base-content/60">{{ label }}</legend>

  {% if show_toggle == "true" %}
    <div x-data="{ show: false }" class="relative">
      <input
        x-bind:type="show ? 'text' : 'password'"
        name="{{ name }}"
        id="{{ id }}"
        class="input w-full pr-10 bg-primary-content placeholder:text-base-content/50 placeholder:text-xs {{ input_class }}"
        placeholder="{{ placeholder }}"
        value="{{ value }}"
        {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}
        {% if inputmode %}inputmode="{{ inputmode }}"{% endif %}
        {% if required == "true" %}required{% endif %}
      />
      <button type="button"
          @click="show = !show"
          class="absolute right-3 top-1/2 -translate-y-1/2 text-base-content z-10"
          :aria-label="show ? 'Hide password' : 'Show password'">
        <img x-show="!show" src="{% static 'icons/eye.svg' %}" alt="" class="w-3.5 h-2.5">
        <img x-show="show" src="{% static 'icons/eye-slash.svg' %}" alt="" class="w-4 h-4">
      </button>
    </div>
  {% else %}
    <input
      type="{{ type }}"
      name="{{ name }}"
      id="{{ id }}"
      class="input w-full bg-primary-content placeholder:text-base-content/50 placeholder:text-xs {{ input_class }}"
      placeholder="{{ placeholder }}"
      value="{{ value }}"
      {% if autocomplete %}autocomplete="{{ autocomplete }}"{% endif %}
      {% if inputmode %}inputmode="{{ inputmode }}"{% endif %}
      {% if required == "true" %}required{% endif %}
    />
  {% endif %}

  {% if help_text %}
    <p class="label text-xs text-base-content/50">{{ help_text }}</p>
  {% endif %}
  {% if errors %}
    <p class="label text-error text-xs">{{ errors }}</p>
  {% endif %}
</fieldset>
