{% comment %}
Item Card Actions Sub-component

Inline action buttons for item cards (Accept/Decline/Request).

Parameters:
- item: Item object (for HTMX URLs)
- action_context: ItemActionContext with .actions and .status_text
{% endcomment %}
{% load button_styles %}

<div id="item-card-actions-{{ item.pk }}" class="flex gap-2 mt-3 p3">
    {% for action in action_context.actions %}
        {% if action.name == 'ACCEPT_REQUEST' %}
            <button
                type="button"
                onclick="showModal('accept-request-modal-{{ item.pk }}')"
                class="flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200
                       bg-borrowd-fern-300 text-borrowd-fern-600 hover:bg-borrowd-fern-400"
            >
                Accept
            </button>
        {% elif action.name == 'REJECT_REQUEST' %}
            <button
                type="button"
                hx-post="{% url 'item-borrow' item.pk %}"
                hx-vals='{"action": "REJECT_REQUEST"}'
                hx-trigger="click"
                hx-swap="innerHTML"
                hx-target="#item-card-actions-{{ item.pk }}"
                class="flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200
                       bg-white text-borrowd-plum-600 border-2 border-borrowd-plum-600 hover:bg-borrowd-plum-100"
            >
                Decline
            </button>
        {% elif action.name == 'REQUEST_ITEM' %}
            <button
                type="button"
                onclick="showModal('request-item-modal-{{ item.pk }}')"
                class="flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200
                       bg-borrowd-indigo-300 text-borrowd-indigo-600 hover:bg-borrowd-indigo-400"
            >
                Request item
            </button>
        {% elif action.name == 'CANCEL_REQUEST' %}
            <button
                type="button"
                hx-post="{% url 'item-borrow' item.pk %}"
                hx-vals='{"action": "CANCEL_REQUEST"}'
                hx-trigger="click"
                hx-swap="innerHTML"
                hx-target="#item-card-actions-{{ item.pk }}"
                class="flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200
                       bg-white text-borrowd-plum-600 border-2 border-borrowd-plum-600 hover:bg-borrowd-plum-100"
            >
                Cancel Request
            </button>
        {% else %}
            <button
                type="button"
                hx-post="{% url 'item-borrow' item.pk %}"
                hx-vals='{"action": "{{ action.name }}"}'
                hx-trigger="click"
                hx-swap="innerHTML"
                hx-target="#item-card-actions-{{ item.pk }}"
                class="flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-colors duration-200
                       bg-borrowd-indigo-300 text-borrowd-indigo-600 hover:bg-borrowd-indigo-400"
            >
                {{ action.label }}
            </button>
        {% endif %}
    {% endfor %}
</div>
