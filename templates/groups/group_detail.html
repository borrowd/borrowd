{% extends "groups/layout.html" %}
{% block head_title %}Group Details{% endblock %}

{% block groups_content %}
<c-box>
    <!-- Groups profile brief:
     - Details (name, description, profile image)
     - Members
     - Invite link
    -->
     <div class="flex flex-col h-full">
        <c-h1>{{ object.name }}</c-h1>
        <p class="text-gray-700 mb-4"><b>Description:</b> {{ object.description }}</p>
        <p class="text-gray-700 mb-4"><b>Membership requires approval:</b> {{ object.membership_requires_approval|yesno:"Yes,No" }}</p>
        <c-button>
            <a href="{% url 'borrowd_groups:group-invite' object.pk %}">
                Get Invite Link
            </a>
        </c-button>
        <c-h2>Members</c-h2>
        <ul class="list-disc list-inside mb-4">
            {% for member in object.users.all %}
                <li>{{ member.username }}</li>
            {% empty %}
                <li>No members yet.</li>
            {% endfor %}
        </ul>
        <c-button>
            <a href="{% url 'borrowd_groups:group-edit' object.pk %}">Edit Group</a>
        </c-button>
    </div>
</c-box>
<script>
    function onShareClick(e) {
        // todo: acquire real invite link
        const inviteLink = '{{ request.build_absolute_uri }}';
        navigator.clipboard.writeText(inviteLink)
            .then(() => {
                alert('Invite link copied to clipboard!');
            })
            .catch(err => {
                console.error('Failed to copy text: ', err);
            });
    }
</script>
{% endblock %}
